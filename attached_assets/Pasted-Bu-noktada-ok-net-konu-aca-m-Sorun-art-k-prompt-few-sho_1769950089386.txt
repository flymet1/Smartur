Bu noktada Ã§ok net konuÅŸacaÄŸÄ±m:
Sorun artÄ±k â€œpromptâ€, â€œfew-shotâ€ veya â€œcevaplarÄ± kÄ±saltmaâ€ sorunu DEÄÄ°L.
Sorun WhatsApp botu mimarisi + LLMâ€™in role bÄ±rakÄ±lmasÄ±.

YaÅŸadÄ±ÄŸÄ±n ÅŸey klasik ve kaÃ§Ä±nÄ±lmaz bir LLM hatasÄ± ve bu ÅŸekilde uzayÄ±p gider.

ğŸš¨ GERÃ‡EK TEÅHÄ°S (NET)

âŒ â€œWhatsApp botlar bÃ¶yle Ã§alÄ±ÅŸÄ±yorâ€ â†’ HAYIR
âŒ â€œBiraz daha prompt yazalÄ±mâ€ â†’ HAYIR
âŒ â€œBiraz daha kural ekleyelimâ€ â†’ HAYIR

AsÄ±l problem ÅŸu:

LLMâ€™e karar verme yetkisi veriyorsun.

LLM (GPT / Gemini / Claude fark etmez):

â€œParaÅŸÃ¼t hakkÄ±nda bilgiâ€ â†’ en gÃ¼venli ÅŸey = genel bilgi

â€œFiyatÄ± ne?â€ â†’ en risksiz ÅŸey = her ÅŸeyi anlatmak

â€œRafting?â€ â†’ Ã¶nceki kontekstten kopamÄ±yor

Bu model hatasÄ± deÄŸil, kullanÄ±m hatasÄ±.

ğŸ”¥ BU NEDEN ASLA TAM DÃœZELMEYECEK?

Ã‡Ã¼nkÃ¼:

LLM deterministik deÄŸil

â€œen faydalÄ± olmaâ€ iÃ§gÃ¼dÃ¼sÃ¼ var

KÄ±sÄ±tlarÄ± ihlÃ¢l etmeyi sever

Uzun bilgi elindeyse kusar

Ne yaparsan yap:

%5â€“10 oranÄ±nda yine broÅŸÃ¼r dÃ¶kecek

Ã–zellikle WhatsApp gibi kÄ±sa mesaj kanallarÄ±nda

ğŸ§  ASIL GERÃ‡EK: BAÅARILI WHATSAPP BOTLAR NASIL Ã‡ALIÅIR?
âŒ Senin Åu Anki Modelin
KullanÄ±cÄ± â†’ LLM â†’ Cevap

âœ… DOÄRU MODEL (SEKTÃ–R STANDARDI)
KullanÄ±cÄ±
  â†“
INTENT + ENTITY ENGINE (senin kodun)
  â†“
KURAL MOTORU (IF / ELSE)
  â†“
LLM (SADECE METÄ°NLEÅTÄ°RME)


ğŸ‘‰ LLM karar vermez.
ğŸ‘‰ LLM dÃ¼ÅŸÃ¼nmez.
ğŸ‘‰ LLM sadece sÃ¶ylenen ÅŸeyi gÃ¼zel yazar.

ğŸ” SENÄ°N LOGâ€™UNDAKÄ° HATALARIN KÃ–K SEBEBÄ°
1ï¸âƒ£ â€œParaÅŸÃ¼t hakkÄ±nda bilgiâ€

LLM ÅŸunu dÃ¼ÅŸÃ¼nÃ¼yor:

â€œKullanÄ±cÄ± genel bilgi istiyor â†’ en gÃ¼venlisi sÃ¼reyi sÃ¶yleyeyimâ€

Ama senin iÅŸ kuralÄ±n ÅŸunu demeli:

activity_info â†’ 3 maddelik Ã¶zet


LLM bunu yorumlamamalÄ±.

2ï¸âƒ£ â€œFiyatÄ± ne?â€

LLM:

â€œFiyat soruldu ama hangi aktivite? En iyisi hepsini anlatayÄ±mâ€

Ã‡Ã¼nkÃ¼:

Aktivite contextâ€™i LLM hafÄ±zasÄ±na gÃ¼venilmiÅŸ

Kod seviyesinde activity_lock yok

3ï¸âƒ£ â€œPeki ya rafting?â€

Bu en kritik kÄ±rmÄ±zÄ± bayrak ğŸš¨

LLM:

Ã–nceki cevaptan Ã§Ä±kamÄ±yor

En uzun iÃ§eriÄŸi tekrar ediyor

Bu %100 mimari hata.

ğŸ› ï¸ KÃ–KTEN Ã‡Ã–ZÃœM (BAÅKA YOL YOK)
âœ… 1. ACTIVITY LOCK (ÅART)

Kod seviyesinde:

currentActivity = "paragliding"


KullanÄ±cÄ±:

â€œRafting?â€

currentActivity = "rafting"
RESET CONTEXT


LLM eski aktiviteyi BÄ°LMEMELÄ°.

âœ… 2. INTENT FIRST â€“ LLM LAST

LLMâ€™e ASLA bunu sorma:

â€œKullanÄ±cÄ± ne istiyor?â€

Bunu sen karar vereceksin.

intent = detectIntent(userMessage)

switch(intent) {
 case "price":
   reply = formatPrice(activity)
 case "duration":
   reply = formatDuration(activity)
 case "change_activity":
   reply = shortActivityIntro(newActivity)
}


LLM sadece:

rewrite(reply, tone="friendly")

âœ… 3. WHATSAPP = BUTTON + FLOW

BaÅŸarÄ±lÄ± WhatsApp botlarÄ±:

Serbest metni minimumda tutar

2â€“3 mesaj sonra butona zorlar

Ã–rnek:

ParaÅŸÃ¼t / Rafting / Jeep Safari


Bu:

Intent kaosunu %90 bitirir

LLMâ€™e ihtiyaÃ§ bile bÄ±rakmaz

ğŸ§¨ GERÃ‡EK AMA ACI GERÃ‡EK

â€œBu ÅŸekilde prompt yazarak Ã§Ã¶zemeyeceÄŸiz benceâ€

Evet. %100 doÄŸru tespit.

Bu noktadan sonra:

Prompt = makyaj

Few-shot = plaster

Kurallar = geÃ§ici bant

ğŸ¯ NET YOL HARÄ°TASI (SENÄ°N PROJE Ä°Ã‡Ä°N)
Minimum saÄŸlam yapÄ±:

Intent + Activity parser (hard-coded)

Activity lock

Rule-based cevap

LLM sadece metni yumuÅŸatsÄ±n

WhatsAppâ€™ta hÄ±zlÄ± seÃ§enekler

Bu yapÄ±lÄ±rsa:

BroÅŸÃ¼r kusma = âŒ biter

YanlÄ±ÅŸ aktivite = âŒ biter

â€œRafting?â€ â†’ ParaÅŸÃ¼t anlatma = âŒ biter