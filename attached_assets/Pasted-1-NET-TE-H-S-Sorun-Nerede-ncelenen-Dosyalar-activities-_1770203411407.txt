1ï¸âƒ£ NET TEÅHÄ°S â€” Sorun Nerede?
Ä°ncelenen Dosyalar

activities-data.json

final-ai-prompt.txt

orchestrator-code.ts

intent-map.md

known-issues.md

chat-logs.txt

ğŸ¯ Ana Sorun (Ã–zet)

Prompt iyi ama yalnÄ±z bÄ±rakÄ±lmÄ±ÅŸ.
Orchestrator doÄŸru sinyali vermiyor.
Bu yÃ¼zden bot:

Bazen tek aktivite gibi davranÄ±yor

Bazen Ã§oklu cevap veriyor

Bazen placeholder ([company.phone]) basÄ±yor

Bazen tÃ¼m aktivite verisini deÄŸil Ã¶zetini veriyor

Her mesajÄ±n sonuna gereksiz CTA ekliyor

Bu bir â€œmodel hatasÄ±â€ deÄŸil â†’ orchestrasyon boÅŸluÄŸu.

2ï¸âƒ£ KRÄ°TÄ°K BULGULAR (Dosya BazlÄ±)
âŒ 1. activities-data.json

Problem:

Alanlar var ama zorunlu / opsiyonel ayrÄ±mÄ± yok

â€œextraâ€, â€œtransferâ€, â€œregionâ€ gibi alanlarÄ±n yokluk durumu tanÄ±mlÄ± deÄŸil

ğŸ“Œ SonuÃ§:

GPT yokluÄŸu â€œyokturâ€ diye uydurabiliyor
(KadÄ±n pilot ekstra sorunu buradan geliyor)

âŒ 2. final-ai-prompt.txt

Problem:

Kurallar doÄŸru ama:

â€œAktivite belirtilmediyse nasÄ±l davranÄ±lacaÄŸÄ±â€ net deÄŸil

â€œTÃ¼m aktiviteleri listele / sorma eÅŸiÄŸiâ€ tanÄ±msÄ±z

â€œCTA ne zaman sorulurâ€ aÃ§Ä±k deÄŸil

ğŸ“Œ SonuÃ§:

AynÄ± soru â†’ farklÄ± cevap davranÄ±ÅŸlarÄ±

âŒ 3. orchestrator-code.ts

EN KRÄ°TÄ°K NOKTA

Åu an:

Aktivite tespit ediliyor gibi

Ama GPTâ€™ye karar verdiriliyor

Eksik olan:

mode: "SINGLE" | "MULTI" | "SPECIFIC"
fieldRequested: "duration" | "region" | "transfer" | ...
activitySpecified: boolean


ğŸ“Œ SonuÃ§:

GPT bazen â€œyardÄ±mcÄ± olayÄ±mâ€ diye yanlÄ±ÅŸ varsayÄ±m yapÄ±yor

âŒ 4. Placeholder Problemi

[company.phone], [company.email] gibi alanlar:

Promptâ€™ta â€œasla placeholder basmaâ€ kuralÄ± yok

Orchestrator bu alanlarÄ± pre-resolve etmiyor

ğŸ“Œ Bu yÃ¼zden:

Size yardÄ±mcÄ± olmak iÃ§in telefon numaramÄ±z: [company.phone]

âŒ 5. SÃ¼rekli â€œRezervasyon ister misiniz?â€

Problem:
CTA davranÄ±ÅŸÄ±:

Global kural

Intentâ€™e baÄŸlÄ± deÄŸil

ğŸ“Œ WhatsApp iÃ§in yanlÄ±ÅŸ:

Bilgi isteyen kullanÄ±cÄ±yÄ± yorar

Spam hissi yaratÄ±r

3ï¸âƒ£ DOÄRU MÄ°MARÄ° KARAR (SEN DOÄRU YOLDASIN)

â“â€œHer aktivitenin Ã§ok farklÄ± alanlarÄ± var â€” bu yaklaÅŸÄ±m yeterli mi?â€

âœ… CEVAP:

EVET. Ama 1 seviye daha netleÅŸtirerek.

ğŸ¯ DoÄŸru yaklaÅŸÄ±m:

Field-Agnostic Mode Control

Yani:

SÃ¼re / BÃ¶lge / Transfer / Ekstralar fark etmez

Hepsi aynÄ± kurala tabi olur

4ï¸âƒ£ OLMASI GEREKEN NÄ°HAÄ° AKIÅ (PRODUCTION-SAFE)
ğŸ§  Orchestrator (Kod) SORUMLULUÄU

Sadece ÅŸunlarÄ± belirler:

{
  "activityCount": 5,
  "activitySpecified": false,
  "mode": "MULTI",
  "fieldRequested": "duration"
}


â— GPT ASLA karar vermez

ğŸ¤– GPT (Prompt) SORUMLULUÄU

Sadece:

Modeâ€™a uyar

Fieldâ€™Ä± okur

Uydurmaz

Eksikse sorar

Placeholder basmaz

5ï¸âƒ£ BOT NASIL DAVRANMALI? (Senaryolara Net Cevap)
KullanÄ±cÄ±:

â€œAktivite hangi bÃ¶lgede?â€

mode = MULTI + activitySpecified=false

âœ”ï¸ BOT:

â€œHangi aktivite iÃ§in bilgi almak istiyorsunuz? Ã–rn: YamaÃ§ ParaÅŸÃ¼tÃ¼, TÃ¼plÃ¼ DalÄ±ÅŸâ€¦â€

âŒ BOT ASLA:

VarsayÄ±lan aktivite seÃ§mez

Tek aktivite cevaplamaz

KullanÄ±cÄ±:

â€œKaÃ§ dakika sÃ¼rÃ¼yor?â€

âœ”ï¸ DoÄŸru davranÄ±ÅŸ:

Aktivite belirtilmediyse â†’ sor

BelirtilmiÅŸse â†’ tek cevap

â›” KarÄ±ÅŸÄ±k cevap YASAK

6ï¸âƒ£ REPLIT ASSISTANTâ€™A VERECEÄÄ°N TEK PROMPT (ğŸ”¥ FINAL)

AÅŸaÄŸÄ±daki metni aynen Replit Assistantâ€™a ver:

ğŸ”¥ REPLIT ASSISTANT PROMPT
Bu projede AI karar verici OLMAYACAK.

AÅŸaÄŸÄ±daki gÃ¶revleri eksiksiz uygula:

1. ORCHESTRATOR GÃœNCELLEMESÄ°
- Her kullanÄ±cÄ± mesajÄ± iÃ§in ÅŸu alanlarÄ± Ã¼ret:
  - activityCount (number)
  - activitySpecified (boolean)
  - fieldRequested (string | null)
  - mode: "SINGLE" | "SPECIFIC" | "MULTI"

- KARARLAR KOD TARAFINDA VERÄ°LECEK
- GPT bu kararlara UYACAK, ASLA kendi varsayÄ±mÄ±nÄ± yapmayacak

2. GPT PROMPT GÃœNCELLEMESÄ°
AÅŸaÄŸÄ±daki kurallarÄ± EKLE:

- Aktivite belirtilmemiÅŸse ASLA varsayÄ±lan aktivite seÃ§me
- Birden fazla aktivite varsa ve activitySpecified=false ise:
  â†’ KullanÄ±cÄ±dan netleÅŸtirme iste
- GPT ASLA placeholder basamaz ([company.phone] vb)
  â†’ Veri yoksa: "Bu bilgi iÃ§in destek ekibimiz yardÄ±mcÄ± olur" de
- CTA ("Rezervasyon ister misiniz?") sadece:
  - fiyat
  - mÃ¼saitlik
  - Ã¶deme
  sorularÄ±ndan SONRA sorulacak

3. AKTÄ°VÄ°TE VERÄ° MODELÄ°
- activities-data.json iÃ§in:
  - Her alanÄ±n:
    - required / optional
    - not_applicable durumu aÃ§Ä±kÃ§a tanÄ±mlansÄ±n
- "Ekstra yok" = aÃ§Ä±k boolean / boÅŸ array
- GPT yokluk uydurmayacak

4. YASAK DAVRANIÅLAR
- VarsayÄ±lan aktivite seÃ§mek
- Eksik bilgi uydurmak
- Her cevabÄ±n sonuna CTA eklemek
- Mode dÄ±ÅŸÄ±na Ã§Ä±kmak

5. TEST
AÅŸaÄŸÄ±daki senaryolarÄ± test et:
- Aktivite belirtilmeden sÃ¼re sorusu
- Aktivite belirtilmeden bÃ¶lge sorusu
- Telefon numarasÄ± sorusu
- Ekstra sorusu (kadÄ±n pilot gibi)
- Ã‡oklu aktivite varken tek cevap verilmesi (YASAK)

AmaÃ§:
- Deterministik
- TutarlÄ±
- Production-safe WhatsApp bot

Bu mimariye %100 sadÄ±k kal.
